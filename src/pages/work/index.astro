---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const items = (await getCollection('portfolio')).sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<Layout title="Work">
    <main class="mx-auto max-w-5xl px-4 py-10">
        <h1 class="text-3xl font-semibold mb-8">Work</h1>
        <ul class="grid grid-cols-1 gap-6 sm:grid-cols-2">
            {
                items.map(({ slug, data }) => (
                    <li class="group rounded-xl bg-white/5 p-4">
                        <a href={`/work/${slug}/`} class="block focus:outline-none focus:ring-2 focus:ring-white/60 rounded">
                            {data.cover && <img src={data.cover} alt={data.title} loading="lazy" class="rounded-lg mb-3" />}
                            <h2 class="text-xl font-medium group-hover:underline">{data.title}</h2>
                            <p class="opacity-80 text-sm">{data.summary}</p>
                            <p class="text-xs mt-1 opacity-70">{new Date(data.date).toLocaleDateString()}</p>
                        </a>
                    </li>
                ))
            }
        </ul>
    </main>
</Layout>
