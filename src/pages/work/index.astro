---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const items = (await getCollection('portfolio')).sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<Layout title="Work | Peter Son" description="Portfolio of web development projects and case studies by Peter Son.">
    <main class="py-16 sm:py-24 lg:py-32">
        <div class="max-w-6xl mx-auto px-6 sm:px-8">
            <div class="text-center mb-16">
                <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold text-navy mb-6">My Work</h1>
                <p class="text-lg sm:text-xl text-navy max-w-2xl mx-auto">
                    A collection of projects that showcase my skills in front-end development, user experience design, and modern web technologies.
                </p>
            </div>

            <ul class="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3">
                {
                    items.map(({ slug, data }) => (
                        <li class="group">
                            <a
                                href={`/work/${slug}/`}
                                class="block bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 overflow-hidden"
                            >
                                {data.cover && (
                                    <div class="aspect-video overflow-hidden">
                                        <img
                                            src={data.cover}
                                            alt={data.title}
                                            loading="lazy"
                                            class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                                        />
                                    </div>
                                )}
                                <div class="p-6">
                                    <h2 class="text-xl font-semibold text-navy mb-3 group-hover:text-sky transition-colors duration-200">{data.title}</h2>
                                    <p class="text-gray-600 text-sm mb-4 line-clamp-3">{data.summary}</p>
                                    <div class="flex items-center justify-between">
                                        <p class="text-xs text-gray-500">{new Date(data.date).toLocaleDateString()}</p>
                                        {data.tags && data.tags.length > 0 && (
                                            <div class="flex flex-wrap gap-1">
                                                {data.tags.slice(0, 2).map((tag) => (
                                                    <span class="px-2 py-1 bg-sky/10 text-sky text-xs rounded-full">{tag}</span>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </a>
                        </li>
                    ))
                }
            </ul>
        </div>
    </main>
</Layout>
